<ng-container *ngIf="state$ | async as state">
  <div class="flex flex-col flex-grow min-w-0">
    <div class="flex flex-shrink-0 min-h-0">
      <app-microphone-lane
        *ngFor="let mic of state.microphones"
        [microphone]="mic" (spoke)="spoke($event)"
        class="ml-3 my-3"></app-microphone-lane>
    </div>

    <app-transcript
      [systemMessage]="state.systemMessage"
      class="flex-grow min-h-0 ml-3 mb-3" [(messages)]="messages" (messagesChange)="updateMessages($event)"></app-transcript>

    <div class="mb-3 ml-3 space-y-3 flex flex-col">
      <app-textarea #moderatorText [heading]="'Direct response'" (onEnter)="fakeResponse($event)"></app-textarea>
      <app-button (click)="fakeResponse(moderatorText.value)">Play</app-button>
    </div>

    <app-output-queue
      class="flex-shrink-0 mb-3 ml-3"
      *ngIf="state.output"
      [output]="state.output"></app-output-queue>
  </div>

  <div class="flex flex-col m-3 space-y-3">
    <app-prerecoding-lane class="flex-grow min-h-0"></app-prerecoding-lane>
    <app-box-container class="flex justify-between">
      <app-explaination
        [heading]="'Configurations'"
        [description]="'Credentials and Settings'"></app-explaination>
      <app-button (click)="openConfigurations(true)">Edit</app-button>
    </app-box-container>
  </div>
</ng-container>
